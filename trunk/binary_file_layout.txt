int32 magic number
int8  file version
bool hasTemplate
Template if hasTemplate
Instructions
eof

-----------------------

int32 magic number
int8 file version
Template
eof

-----------------------

Template:

  QString filename
  partDictionary (from page.csi)
  Page templatePage
  Submodel template.subModelPart
  
Instructions:
  QString imported filename
  QSize Page.PageSize
  float Page.Resolution
  
  float CSI.scale
  float PLI.scale
  float SubmodelPreview.scale

  float CSI.defaultRotation x, y, z
  float PLI.defaultRotation x, y, z
  float SubmodelPreview.defaultRotation x, y, z
  
  partDictionary (global)
 
  int32 length of submodel dictionary
  ... Submodel 0..n ...
 
  Submodel instructions.mainModel
 
  int32 length of scene.guides 
  ... QPointF guide.pos ...
  ... bool guide.orientation (True = Horizontal) ...

Submodel:
  PartOGL self
  int32 length of pages
  ... Page 0..n ...
  int32 length of submodels
  ... Submodel filename 0..n ...
  int32 _row
  QString parent (filename of model using this submodel, ie _parent.filename)

partDictionary:
  int32 length of part dictionary
  ... PartOGL 0..n ...

PartOGL:
  QString filename
  QString name
  bool isPrimitive
  int32 width
  int32 height
  int32 leftInset
  int32 bottomInset
  QPointF center
  
  float pliScale
  float pliRotation x, y, z
  
  int32 number of primitives
  ... Primitive 0..n ...
  int32 number of parts
  ... Part 0..n ...
  
Primitive:  # 9 points for triangle, 12 points for quad
  int32 color
  int8 type
  int32 winding
  
  float points[0]
  ...
  float points[8]  # for triangle
  ...
  float points[11] # for quad
  
Part:
  QString filename  (links this to a partOGL)
  bool inverted
  int32 color
  float matrix[0] 
  ... 
  float matrix[15]
  
  bool useDisplacement # if displacement
  
  if useDisplacement:
    float displacement[0] # x
    float displacement[1] # y
    float displacement[2] # z
    int32 displaceDir
    Part displaceArrow
    
  if part is also Arrow:
    int32 arrow.length
  
Page:
  int32 number
  int32 _row
  
  QPointF pos
  QRectF rect
  QColor color
  bool hasBrush
  QBrush brush, if hasBrush
  
  QPointF number.pos
  QFont number.font

  int32 number of Steps
  ... Step 0..n ...

  bool hasSubmodelItem
  SubmodelItem submodelItem, if it exists

  int32 number of borders
  ... Border 0..n ...

Border:
  int32 child row
  QPointF pos
  QRectF rect
  QPen pen

Step:
  int32 number
  bool hasPLI
  bool hasNumberItem
  
  QPointF pos
  QRectF rect
  QRectF maxRect

  CSI csi
  PLI pli, if hasPLI
    
  QPointF number.pos, if hasNumberItem
  QFont number.font, if hasNumberItem

  int32 number of Callouts
  ... Callout 0..n ...

Callout:
  int32 number
  bool showStepNumbers
  
  RoundedRectItem pos, rect, pen, brush, cornerRadius
  
  QPointF callout.arrow.tipRect.point
  QPointF callout.arrow.baseRect.point
  QPen callout.arrow.pen
  QBrush callout.arrow.brush
  
  bool hasQuantityLabel
  QPointF qtyLabel.pos, if hasQuantityLabel
  QFont qtyLabel.font, if hasQuantityLabel
  int32 quantity, if hasQuantityLabel

  int32 number of Steps
  ... Step 0..n ...

SubmodelItem:
  int32 row
  RoundedRectItem pos, rect, pen, brush, cornerRadius
  
  float scale
  float rotation x, y, z
  
CSI:
  QPointF pos
  int32 rect.width
  int32 rect.height
  QPointF center

  float scale
  float rotation x, y, z
  
  int32 number of non-arrow parts
  ... Part 0..n ...

PLI:
  RoundedRectItem pos, rect, pen, brush, cornerRadius
  int32 number of pliItems
  ... PLIItem 0..n ...

PLIItem:
  QString filename
  int32 color
  int32 quantity
  QPointF pos
  QRectF rect
  QPointF numberItem.pos
  QFont numberItem.font
  
RoundedRectItem:
  QPointF pos
  QRectF rect
  QPen pen
  QBrush brush
  int16 cornerRadius
  